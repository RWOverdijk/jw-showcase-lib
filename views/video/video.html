<ion-view class="jw-video-view" cache-view="false" can-swipe-back="false" jw-lazy-load>
  <ion-content class="has-jw-header">
    <div class="jw-video-container" ng-class="{'is-loading': vm.loading}">
      <div class="jw-container">
        <div class="jw-video-container-aspect">
          <div class="jw-video-loading">
            <div class="jw-rotate-animation">
              <i class="jwy-icon-buffer"></i>
            </div>
          </div>
        </div>
        <div class="jw-video-container-player" ng-if="vm.activeDevice">
          <div class="jw-casting-video-container" ng-style="{backgroundImage: 'url(' + vm.item.image + ')'}">
            <div
              class="jw-casting-video-control-container {{vm.mediaState.queueHasPreviousItem ? '' : 'jw-controls-disabled'}}"
              ng-if="vm.mediaInfo.mediaid === vm.item.mediaid"
              ng-click="vm.queuePrevious()"
            >
              <span class="jwy-icon jwy-icon-skip_previous" style="z-index:12;"></span>
            </div>
            <div class="jw-casting-video-control-container" ng-click="vm.castToDevice()">
              <span
                class="jwy-icon {{vm.mediaState.playerState === 3 || vm.mediaInfo.mediaid !== vm.item.mediaid ? 'jwy-icon-play' : 'jwy-icon-pause'}}"
                style="z-index:12;"
              ></span>
            </div>
            <div
              class="jw-casting-video-control-container {{vm.mediaState.queueHasNextItem ? '' : 'jw-controls-disabled'}}"
              ng-if="vm.mediaInfo.mediaid === vm.item.mediaid"
              ng-click="vm.queueNext()"
            >
              <span class="jwy-icon jwy-icon-skip_next" style="z-index:12;"></span>
            </div>
          </div>
        </div>
        <div class="jw-video-container-player" ng-if="!vm.activeDevice">
          <!-- remove when chromecast -->
          <jw-player settings="vm.playerSettings" on-playlist-item="vm.onPlaylistItem" on-time="vm.onTime"
              on-complete="vm.onComplete" on-first-frame="vm.onFirstFrame" on-levels="vm.onLevels"
              on-ready="vm.onReady" on-error="vm.onError" on-setup-error="vm.onSetupError"
              on-ad-impression="vm.onAdImpression"></jw-player>
        </div>
      </div>
    </div>

    <jw-toolbar-video item="vm.item"></jw-toolbar-video>

    <div class="jw-row jw-row-inverse">
      <jw-video-details item="vm.item"></jw-video-details>
    </div>

    <div class="jw-row" ng-if="vm.feed">
      <jw-card-slider feed="vm.feed" featured="false" delegate="vm.feedCardSliderDelegate"
          class="jw-card-slider-flag-now-playing jw-lazy-load" cols="{xs: 1, sm: 2, md: 3, lg: 4, xl: 5}"
          on-card-click="vm.cardClickHandler" title="More like this"></jw-card-slider>
    </div>
    <div class="jw-row" ng-if="vm.recommendationsFeed">
      <jw-card-slider feed="vm.recommendationsFeed" featured="false" title="Related videos" class="jw-lazy-load"
          cols="{xs: 1, sm: 2, md: 3, lg: 4, xl: 5}" on-card-click="vm.cardClickHandler"></jw-card-slider>
    </div>
    <jw-footer></jw-footer>
  </ion-content>
</ion-view>
